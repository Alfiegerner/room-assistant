(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{219:function(t,e,s){"use strict";s.r(e);var a=s(3),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"bluetooth-classic"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bluetooth-classic"}},[t._v("#")]),t._v(" Bluetooth Classic")]),t._v(" "),s("p",[s("strong",[t._v("Integration Key:")]),t._v(" "),s("code",[t._v("bluetoothClassic")])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("This integration cannot be used together with "),s("a",{attrs:{href:"./bluetooth-low-energy"}},[t._v("Bluetooth Low Energy")]),t._v(".")])]),t._v(" "),s("p",[t._v("The Bluetooth Classic integration can detect the location of any Bluetooth device within the home. It does this by sending out connection requests to the device addresses you configure on rotation and then checking the signal strength of the response. The configured Bluetooth devices do not do not need to be paired with your machines running room-assistant.")]),t._v(" "),s("p",[t._v("The integration has been tested to work great with the Apple Watch. You may see a minor hit on the battery life of the Bluetooth devices when enabling this.")]),t._v(" "),s("h2",{attrs:{id:"requirements"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[t._v("#")]),t._v(" Requirements")]),t._v(" "),s("h3",{attrs:{id:"running-with-nodejs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#running-with-nodejs"}},[t._v("#")]),t._v(" Running with NodeJS")]),t._v(" "),s("p",[t._v("This integration only works on Linux, as it depends on "),s("code",[t._v("hcitool")]),t._v(". On most Linux distributions it should already come pre-installed. If it isn't room-assistant will warn you when starting. You can then install it with:")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" bluetooth bluez\n")])])]),s("p",[t._v("If you want to run room-assistant without root privileges (as it is recommended) you also need to grant the correct permissions:")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" setcap cap_net_raw+eip "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("eval")]),t._v(" readlink -f `which hcitool`"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n")])])]),s("h3",{attrs:{id:"running-with-docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#running-with-docker"}},[t._v("#")]),t._v(" Running with Docker")]),t._v(" "),s("p",[t._v("This integration requires you to run room-assistant in the "),s("code",[t._v("host")]),t._v(" network.")]),t._v(" "),s("h2",{attrs:{id:"how-it-works"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#how-it-works"}},[t._v("#")]),t._v(" How it works")]),t._v(" "),s("p",[t._v("This integration assumes that you have loaded it and configured it in the same manner on all instances that you want to use for tracking. Every 6 seconds each instance in the cluster will be tasked with querying the signal strength of one of the configured devices. The resulting RSSI values are shared with all other instances, one of which keeps track of all device states.")]),t._v(" "),s("p",[t._v("Each configured device will create a sensor that has the name of the closest room-assistant instance as its state - or "),s("code",[t._v("not_home")]),t._v(" if the device could not be found by any of them. The distance in the attributes of those sensors is the inverted signal strength value and does not actually represent any physical distance. It may also show negative numbers.")]),t._v(" "),s("h2",{attrs:{id:"inquiries-switch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#inquiries-switch"}},[t._v("#")]),t._v(" Inquiries switch")]),t._v(" "),s("p",[t._v("Each instance running this integration will also create a switch for enabling or disabling Bluetooth inquiries. A disabled switch blocks all Bluetooth requests of the instance, which essentially means that your Bluetooth device won't be discovered by this instance anymore. It does not take the instance out of the rotation however, so the time to detection stays the same.")]),t._v(" "),s("p",[t._v("You could use this to reduce the resources used by room-assistant when you are certain nobody is home. Another example would be disabling the inquiries when you are asleep to save the batteries of your Bluetooth devices at night.")]),t._v(" "),s("h2",{attrs:{id:"settings"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#settings"}},[t._v("#")]),t._v(" Settings")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Name")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Default")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("addresses")])]),t._v(" "),s("td",[t._v("Array")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("List of Bluetooth MAC addresses that should be tracked. You can usually find them in the device settings.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("minRssi")])]),t._v(" "),s("td",[t._v("Number")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("Limits the RSSI at which a device is still reported if configured. Remember, the RSSI is the inverse of the sensor attribute distance, so for a cutoff at 10 you would configure -10.")])])])]),t._v(" "),s("details",{staticClass:"custom-block details"},[s("summary",[t._v("Example Config")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("global")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("integrations")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" bluetoothClassic\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("bluetoothClassic")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("minRssi")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("-20")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("addresses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'08:05:90:ed:3b:60'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'77:50:fb:4d:ab:70'")]),t._v("\n")])])])])])}),[],!1,null,null,null);e.default=n.exports}}]);