(self.webpackChunkroom_assistant=self.webpackChunkroom_assistant||[]).push([[440],{7789:(e,n,s)=>{"use strict";s.r(n),s.d(n,{data:()=>a});const a={key:"v-d7be191a",path:"/guide/installation.html",title:"Installation",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:2,title:"Running with NodeJS",slug:"running-with-nodejs",children:[{level:3,title:"Recommended for...",slug:"recommended-for",children:[]},{level:3,title:"Requirements",slug:"requirements",children:[]},{level:3,title:"Installation",slug:"installation-1",children:[]},{level:3,title:"Making it a service",slug:"making-it-a-service",children:[]}]},{level:2,title:"Running with Docker",slug:"running-with-docker",children:[{level:3,title:"Recommended for...",slug:"recommended-for-1",children:[]},{level:3,title:"Installation",slug:"installation-2",children:[]}]},{level:2,title:"Running with Home Assistant OS",slug:"running-with-home-assistant-os",children:[]}],filePathRelative:"guide/installation.md",git:{updatedTime:1622398265e3,contributors:[]}}},6285:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>G});var a=s(6252),t=s(9528);const i=(0,a.Wm)("h1",{id:"installation"},[(0,a.Wm)("a",{class:"header-anchor",href:"#installation"},"#"),(0,a.Uk)(" Installation")],-1),l=(0,a.Wm)("div",{class:"custom-container tip"},[(0,a.Wm)("p",{class:"custom-container-title"},"TIP"),(0,a.Wm)("p",null,[(0,a.Uk)("Also checkout the quickstart guides in the menu on the left! If you are planning on installing room-assistant on multiple hosts "),(0,a.Wm)("a",{href:"./quickstart-ansible"},"Ansible"),(0,a.Uk)(" will automate the process for you.")])],-1),o=(0,a.Wm)("h2",{id:"running-with-nodejs"},[(0,a.Wm)("a",{class:"header-anchor",href:"#running-with-nodejs"},"#"),(0,a.Uk)(" Running with NodeJS")],-1),r=(0,a.Wm)("h3",{id:"recommended-for"},[(0,a.Wm)("a",{class:"header-anchor",href:"#recommended-for"},"#"),(0,a.Uk)(" Recommended for...")],-1),m=(0,a.Wm)("p",null,"Dedicated or resource-limited computers, like Raspberry Pis. Has least overhead but may conflict with other services, particularly those based on different versions of Node.js.",-1),c=(0,a.Wm)("h3",{id:"requirements"},[(0,a.Wm)("a",{class:"header-anchor",href:"#requirements"},"#"),(0,a.Uk)(" Requirements")],-1),u=(0,a.Uk)("Please make sure you have either NodeJS 14.x or NodeJS 12.x installed. The version provided by Raspbian by default is outdated. Installation guides for NodeJS can be found "),d={href:"https://nodejs.org/en/download/package-manager/#debian-and-ubuntu-based-linux-distributions",target:"_blank",rel:"noopener noreferrer"},h=(0,a.Uk)("here"),W=(0,a.Uk)(". For Pi Zero devices you will need to use a "),p=(0,a.Uk)("different installation process"),k=(0,a.Uk)("."),b=(0,a.Wm)("p",null,"room-assistant instances use some native dependencies for discovering each other in the local network using mDNS and providing health checks for systemd. You will require two additional system packages to get this working:",-1),g=(0,a.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-bash"},[(0,a.Wm)("code",null,[(0,a.Wm)("span",{class:"token function"},"sudo"),(0,a.Uk)(),(0,a.Wm)("span",{class:"token function"},"apt-get"),(0,a.Uk)(),(0,a.Wm)("span",{class:"token function"},"install"),(0,a.Uk)(" libavahi-compat-libdnssd-dev libsystemd-dev\n")])]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br")])],-1),f=(0,a.Wm)("p",null,"Note that some of the integrations may also require system packages to be installed, please look at the documentation of the integrations you want to use for this information.",-1),y=(0,a.Wm)("h3",{id:"installation-1"},[(0,a.Wm)("a",{class:"header-anchor",href:"#installation-1"},"#"),(0,a.Uk)(" Installation")],-1),v=(0,a.Wm)("p",null,"You can install room-assistant using npm with the following command:",-1),U=(0,a.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-bash"},[(0,a.Wm)("code",null,[(0,a.Wm)("span",{class:"token function"},"sudo"),(0,a.Uk)(),(0,a.Wm)("span",{class:"token function"},"npm"),(0,a.Uk)(" i --global --unsafe-perm room-assistant\n")])]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br")])],-1),w=(0,a.Wm)("p",null,[(0,a.Uk)("npm will link the binary for running the software, usually into "),(0,a.Wm)("code",null,"/usr/bin/room-assistant"),(0,a.Uk)(". If the directory is already in your "),(0,a.Wm)("code",null,"PATH"),(0,a.Uk)(" you can start it directly by typing "),(0,a.Wm)("code",null,"room-assistant"),(0,a.Uk)(". Otherwise you can start it by typing the full path name of where it was installed.")],-1),x=(0,a.Wm)("div",{class:"custom-container tip"},[(0,a.Wm)("p",{class:"custom-container-title"},"TIP"),(0,a.Wm)("p",null,"During installation you may see a lot of messages like the one in the image below scroll by. Don't worry - these are not errors! This is just the output of dependencies being compiled. As long as npm does not say that the installation ran into an error at the end you are good."),(0,a.Wm)("p",null,[(0,a.Wm)("img",{src:t.Z,alt:"compilation messages"})])],-1),R=(0,a.Wm)("h3",{id:"making-it-a-service"},[(0,a.Wm)("a",{class:"header-anchor",href:"#making-it-a-service"},"#"),(0,a.Uk)(" Making it a service")],-1),S=(0,a.Wm)("p",null,[(0,a.Uk)("To make sure room-assistant always runs on your machine you can create a system service for it. Create the file "),(0,a.Wm)("code",null,"/etc/systemd/system/room-assistant.service"),(0,a.Uk)(" similar to the following example:")],-1),I=(0,a.Wm)("div",{class:"language-text ext-text line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-text"},[(0,a.Wm)("code",null,"[Unit]\nDescription=room-assistant service\n\n[Service]\nType=notify\nExecStart=/usr/local/bin/room-assistant\nWorkingDirectory=/home/pi/room-assistant\nTimeoutStartSec=120\nTimeoutStopSec=30\nRestart=always\nRestartSec=10\nWatchdogSec=60\nUser=pi\n\n[Install]\nWantedBy=multi-user.target\n")]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"2"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"3"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"4"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"5"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"6"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"7"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"8"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"9"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"10"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"11"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"12"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"13"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"14"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"15"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"16"),(0,a.Wm)("br")])],-1),T=(0,a.Wm)("p",null,[(0,a.Uk)("After you have your config ready - in the above example it should be located in "),(0,a.Wm)("code",null,"/home/pi/room-assistant/config/"),(0,a.Uk)(" - you can start and enable the service with:")],-1),q=(0,a.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-bash"},[(0,a.Wm)("code",null,[(0,a.Wm)("span",{class:"token function"},"sudo"),(0,a.Uk)(" systemctl "),(0,a.Wm)("span",{class:"token builtin class-name"},"enable"),(0,a.Uk)(" room-assistant.service\n"),(0,a.Wm)("span",{class:"token function"},"sudo"),(0,a.Uk)(" systemctl start room-assistant.service\n")])]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"2"),(0,a.Wm)("br")])],-1),D=(0,a.Wm)("h2",{id:"running-with-docker"},[(0,a.Wm)("a",{class:"header-anchor",href:"#running-with-docker"},"#"),(0,a.Uk)(" Running with Docker")],-1),_=(0,a.Wm)("h3",{id:"recommended-for-1"},[(0,a.Wm)("a",{class:"header-anchor",href:"#recommended-for-1"},"#"),(0,a.Uk)(" Recommended for...")],-1),j=(0,a.Wm)("p",null,"Computers being used as general servers. Slightly more overhead but avoids possible conflicts with other services.",-1),A=(0,a.Wm)("h3",{id:"installation-2"},[(0,a.Wm)("a",{class:"header-anchor",href:"#installation-2"},"#"),(0,a.Uk)(" Installation")],-1),N=(0,a.Uk)("This project provides official Docker images on "),H={href:"https://hub.docker.com/r/mkerix/room-assistant/",target:"_blank",rel:"noopener noreferrer"},P=(0,a.Uk)("Docker Hub"),J=(0,a.Uk)(". You can either use the latest or a specific version by using the correct tag. It is strongly recommended to run this image with the "),O=(0,a.Wm)("code",null,"host",-1),Y=(0,a.Uk)(" network, otherwise you may run into problems with many parts of the software. For auto-discovery functionality on Linux you will need to map the "),C=(0,a.Wm)("code",null,"/var/run/dbus",-1),L=(0,a.Uk)(" volume."),Z=(0,a.Wm)("details",{class:"custom-container details"},[(0,a.Wm)("summary",null,"Example docker-compose.yml"),(0,a.Wm)("div",{class:"language-yaml ext-yml line-numbers-mode"},[(0,a.Wm)("pre",{class:"language-yaml"},[(0,a.Wm)("code",null,[(0,a.Wm)("span",{class:"token key atrule"},"version"),(0,a.Wm)("span",{class:"token punctuation"},":"),(0,a.Uk)(),(0,a.Wm)("span",{class:"token string"},"'3'"),(0,a.Uk)("\n"),(0,a.Wm)("span",{class:"token key atrule"},"services"),(0,a.Wm)("span",{class:"token punctuation"},":"),(0,a.Uk)("\n  "),(0,a.Wm)("span",{class:"token key atrule"},"room-assistant"),(0,a.Wm)("span",{class:"token punctuation"},":"),(0,a.Uk)("\n    "),(0,a.Wm)("span",{class:"token key atrule"},"image"),(0,a.Wm)("span",{class:"token punctuation"},":"),(0,a.Uk)(" mkerix/room"),(0,a.Wm)("span",{class:"token punctuation"},"-"),(0,a.Uk)("assistant\n    "),(0,a.Wm)("span",{class:"token key atrule"},"network_mode"),(0,a.Wm)("span",{class:"token punctuation"},":"),(0,a.Uk)(" host\n    "),(0,a.Wm)("span",{class:"token key atrule"},"volumes"),(0,a.Wm)("span",{class:"token punctuation"},":"),(0,a.Uk)("\n      "),(0,a.Wm)("span",{class:"token punctuation"},"-"),(0,a.Uk)(" /var/run/dbus"),(0,a.Wm)("span",{class:"token punctuation"},":"),(0,a.Uk)("/var/run/dbus\n")])]),(0,a.Wm)("div",{class:"line-numbers"},[(0,a.Wm)("span",{class:"line-number"},"1"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"2"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"3"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"4"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"5"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"6"),(0,a.Wm)("br"),(0,a.Wm)("span",{class:"line-number"},"7"),(0,a.Wm)("br")])])],-1),E=(0,a.Wm)("h2",{id:"running-with-home-assistant-os"},[(0,a.Wm)("a",{class:"header-anchor",href:"#running-with-home-assistant-os"},"#"),(0,a.Uk)(" Running with Home Assistant OS")],-1),F=(0,a.Uk)("You can install room-assistant as Home Assistant OS add-on by "),M={href:"https://www.home-assistant.io/hassio/installing_third_party_addons/",target:"_blank",rel:"noopener noreferrer"},z=(0,a.Uk)("adding the following URL as repository"),B=(0,a.Uk)(":"),K=(0,a.Wm)("p",null,[(0,a.Wm)("code",null,"https://github.com/mKeRix/hassio-repo")],-1),G={render:function(e,n){const s=(0,a.up)("OutboundLink"),t=(0,a.up)("RouterLink");return(0,a.wg)(),(0,a.j4)(a.HY,null,[i,l,o,r,m,c,(0,a.Wm)("p",null,[u,(0,a.Wm)("a",d,[h,(0,a.Wm)(s)]),W,(0,a.Wm)(t,{to:"/guide/quickstart-pi-zero-w.html#installing-room-assistant"},{default:(0,a.w5)((()=>[p])),_:1}),k]),b,g,f,y,v,U,w,x,R,S,I,T,q,D,_,j,A,(0,a.Wm)("p",null,[N,(0,a.Wm)("a",H,[P,(0,a.Wm)(s)]),J,O,Y,C,L]),Z,E,(0,a.Wm)("p",null,[F,(0,a.Wm)("a",M,[z,(0,a.Wm)(s)]),B]),K],64)}}},9528:(e,n,s)=>{"use strict";s.d(n,{Z:()=>a});const a=s.p+"assets/img/compilation-msgs.f118553e.png"}}]);