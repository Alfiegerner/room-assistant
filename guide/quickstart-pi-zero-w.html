<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Raspberry Pi Zero W | room-assistant</title>
    <meta name="description" content="A companion software to bring your home automation to the room-level for presence detection and more.">
    <meta name="generator" content="VuePress 1.3.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#2d89ef">
  <meta name="msapplication-TileColor" content="#2d89ef">
  <meta name="theme-color" content="#ffffff">
    <meta property="article:modified_time" content="2020-04-26T17:59:24.000Z"><meta property="og:site_name" content="room-assistant"><meta property="og:title" content="Raspberry Pi Zero W"><meta property="og:type" content="website"><meta property="og:url" content="www.room-assistant.io/guide/quickstart-pi-zero-w.html"><meta name="twitter:title" content="Raspberry Pi Zero W"><meta name="twitter:url" content="www.room-assistant.io/guide/quickstart-pi-zero-w.html"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:label1" content="Written by"><meta name="twitter:data2" content="Heiko Rothe"><meta name="twitter:creator" content="@mKeRix">
    <link rel="preload" href="/assets/css/0.styles.0a63d30b.css" as="style"><link rel="preload" href="/assets/js/app.59604680.js" as="script"><link rel="preload" href="/assets/js/3.50b3844a.js" as="script"><link rel="preload" href="/assets/js/6.7b1242b0.js" as="script"><link rel="prefetch" href="/assets/js/10.bdedbafc.js"><link rel="prefetch" href="/assets/js/11.d4613e7d.js"><link rel="prefetch" href="/assets/js/12.ec3d73a7.js"><link rel="prefetch" href="/assets/js/13.d415e004.js"><link rel="prefetch" href="/assets/js/14.1b7b4afa.js"><link rel="prefetch" href="/assets/js/15.204a96b3.js"><link rel="prefetch" href="/assets/js/16.bc5d24db.js"><link rel="prefetch" href="/assets/js/17.c2965f33.js"><link rel="prefetch" href="/assets/js/18.073b45f8.js"><link rel="prefetch" href="/assets/js/19.f7fcc8c1.js"><link rel="prefetch" href="/assets/js/20.797f18d8.js"><link rel="prefetch" href="/assets/js/21.a612051e.js"><link rel="prefetch" href="/assets/js/22.59c99daa.js"><link rel="prefetch" href="/assets/js/23.2170ecab.js"><link rel="prefetch" href="/assets/js/24.8461a930.js"><link rel="prefetch" href="/assets/js/25.1ad334ff.js"><link rel="prefetch" href="/assets/js/26.81a9325b.js"><link rel="prefetch" href="/assets/js/27.93621802.js"><link rel="prefetch" href="/assets/js/4.8413a8e7.js"><link rel="prefetch" href="/assets/js/5.7a7da1f9.js"><link rel="prefetch" href="/assets/js/7.704b3d3e.js"><link rel="prefetch" href="/assets/js/8.5825444f.js"><link rel="prefetch" href="/assets/js/9.a76192d5.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.4a1fb7f1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0a63d30b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">room-assistant</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/integrations/" class="nav-link">
  Integrations
</a></div><div class="nav-item"><a href="https://github.com/sponsors/mKeRix" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Sponsor
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/mKeRix/room-assistant" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/integrations/" class="nav-link">
  Integrations
</a></div><div class="nav-item"><a href="https://github.com/sponsors/mKeRix" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Sponsor
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/mKeRix/room-assistant" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" class="sidebar-link">Introduction</a></li><li><a href="/guide/installation.html" class="sidebar-link">Installation</a></li><li><a href="/guide/upgrading.html" class="sidebar-link">Upgrading</a></li><li><a href="/guide/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/guide/cluster.html" class="sidebar-link">Cluster</a></li><li><a href="/guide/cli.html" class="sidebar-link">CLI</a></li><li><a href="/guide/troubleshooting.html" class="sidebar-link">Troubleshooting</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Quickstart</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/quickstart-pi-zero-w.html" class="active sidebar-link">Raspberry Pi Zero W</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/quickstart-pi-zero-w.html#requirements" class="sidebar-link">Requirements</a></li><li class="sidebar-sub-header"><a href="/guide/quickstart-pi-zero-w.html#installing-raspbian" class="sidebar-link">Installing Raspbian</a></li><li class="sidebar-sub-header"><a href="/guide/quickstart-pi-zero-w.html#installing-room-assistant" class="sidebar-link">Installing room-assistant</a></li><li class="sidebar-sub-header"><a href="/guide/quickstart-pi-zero-w.html#configuring-room-assistant" class="sidebar-link">Configuring room-assistant</a></li><li class="sidebar-sub-header"><a href="/guide/quickstart-pi-zero-w.html#making-sure-it-always-runs" class="sidebar-link">Making sure it always runs</a></li></ul></li><li><a href="/guide/quickstart-pi.html" class="sidebar-link">Raspberry Pi 3 or 4</a></li><li><a href="/guide/quickstart-ansible.html" class="sidebar-link">Ansible</a></li><li><a href="/guide/quickstart-docker.html" class="sidebar-link">Docker</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="raspberry-pi-zero-w"><a href="#raspberry-pi-zero-w" class="header-anchor">#</a> Raspberry Pi Zero W</h1> <p>This page will guide you through setting up a Pi Zero W to run room-assistant.</p> <h2 id="requirements"><a href="#requirements" class="header-anchor">#</a> Requirements</h2> <h3 id="hardware"><a href="#hardware" class="header-anchor">#</a> Hardware</h3> <ul><li>Raspberry Pi Zero W + Power Supply</li> <li>Micro SD Card (ideally Application Class 2 or better)</li> <li>SD Card reader</li></ul> <h3 id="software"><a href="#software" class="header-anchor">#</a> Software</h3> <ul><li><a href="https://www.balena.io/etcher/" target="_blank" rel="noopener noreferrer">balenaEtcher<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Download of the latest <a href="https://www.raspberrypi.org/downloads/raspbian/" target="_blank" rel="noopener noreferrer">Raspbian Buster Lite image<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="installing-raspbian"><a href="#installing-raspbian" class="header-anchor">#</a> Installing Raspbian</h2> <ol><li><p>Put your microSD card into your card reader.</p></li> <li><p>Open balenaEtcher, select the Raspbian image you downloaded and flash it to the SD card.</p></li> <li><p>After that is done, create an empty file called <code>ssh</code> on the <code>boot</code> partition of the SD card that you should now see in your file explorer. You may have to eject your SD card and put it back again before it becomes visible.</p></li> <li><p><em>Optional:</em> If you want to use the Pi Zero W with WiFi, you also need to configure the credentials. Create a file called <code>wpa_supplicant.conf</code> on the <code>boot</code> partition and fill it as shown below, with the marked variables replaced. A list of country codes is available on <a href="https://en.wikipedia.org/wiki/ISO_3166-1" target="_blank" rel="noopener noreferrer">Wikipedia<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <div class="language- extra-class"><pre class="language-text"><code>ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
country=&lt;Insert country code here&gt;

network={
 ssid=&quot;&lt;Name of your WiFi&gt;&quot;
 psk=&quot;&lt;Password for your WiFi&gt;&quot;
}
</code></pre></div></li> <li><p>Unmount the SD card and remove it from your card reader.</p></li> <li><p>Insert the SD card into your Raspberry Pi Zero W, then connect the power supply. Wait a minute for it to boot and connect to your network.</p></li> <li><p>Open a SSH shell to <code>raspberrypi.local</code> with the default user <code>pi</code> and password <code>raspberry</code>. On Windows you can use <a href="https://www.putty.org" target="_blank" rel="noopener noreferrer">Putty<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, with Linux and macOS you can just open the terminal and type <code>ssh pi@raspberrypi.local</code>. If the hostname is not found, use the IP of the Pi instead - it can be found in your router administration panel.</p></li> <li><p>Type <code>passwd</code> to change your password to something more secure.</p></li> <li><p>Type <code>sudo raspi-config</code>, use the arrow keys to go to <code>Network Settings</code> and hit Enter, then select <code>Hostname</code>. Set the hostname to something recognizable, like <code>bedroom</code>. After that select <code>Finish</code> and let the Pi reboot.</p></li></ol> <h2 id="installing-room-assistant"><a href="#installing-room-assistant" class="header-anchor">#</a> Installing room-assistant</h2> <ol><li><p>Open a new SSH session, this time using the hostname (e.g. <code>bedroom.local</code>) and password you set above.</p></li> <li><p>Now we install NodeJS by running <code>wget -O - https://raw.githubusercontent.com/sdesalas/node-pi-zero/master/install-node-v.lts.sh | bash</code>.</p></li> <li><p>To make the commands we install with npm available the $PATH environment variable needs to be extended as well. Edit the file <code>~/.profile</code> (e.g. with <code>nano ~/.profile</code>) and add the <code>PATH=&quot;$PATH:/opt/nodejs/bin&quot;</code> to the end of the file. Save, then run <code>source ~/.profile</code>.</p></li> <li><p>We need to install some other dependencies as well, do so by running <code>sudo apt-get update &amp;&amp; sudo apt-get install libavahi-compat-libdnssd-dev bluetooth libbluetooth-dev libudev-dev</code>.</p></li> <li><p>Now let's get install room-assistant! Run <code>sudo npm i --global --unsafe-perm room-assistant</code>. You will see messages like the one shown below during the installation process. Don't worry about them - they're not errors!</p> <p><img src="/assets/img/compilation-msgs.0260ae46.png" alt="compilation messages"></p></li> <li><p><em>Optional:</em> If you want to run Bluetooth related integrations, you should also grant some additional permissions by executing the commands below.</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> setcap cap_net_raw+eip <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">eval</span> readlink -f `which node`<span class="token variable">)</span></span>
<span class="token function">sudo</span> setcap cap_net_raw+eip <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">eval</span> readlink -f `which hcitool`<span class="token variable">)</span></span>
<span class="token function">sudo</span> setcap cap_net_admin+eip <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">eval</span> readlink -f `which hciconfig`<span class="token variable">)</span></span>
</code></pre></div></li></ol> <h2 id="configuring-room-assistant"><a href="#configuring-room-assistant" class="header-anchor">#</a> Configuring room-assistant</h2> <ol><li><p>Create a config folder for room-assistant with <code>mkdir -p ~/room-assistant/config</code>.</p></li> <li><p>Create a new config file with <code>nano ~/room-assistant/config/local.yml</code> and put your room-assistant configuration in it. The example below configures the <a href="/integrations/home-assistant">Home Assistant</a> and <a href="/integrations/bluetooth-classic">Bluetooth Classic</a> integrations. If you want to use something else check out the <a href="/integrations">integrations</a> section.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">global</span><span class="token punctuation">:</span>
  <span class="token key atrule">integrations</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> homeAssistant
    <span class="token punctuation">-</span> bluetoothClassic
<span class="token key atrule">homeAssistant</span><span class="token punctuation">:</span>
  <span class="token key atrule">mqttUrl</span><span class="token punctuation">:</span> <span class="token string">'mqtt://hassio.local:1883'</span>
  <span class="token key atrule">mqttOptions</span><span class="token punctuation">:</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> youruser
    <span class="token key atrule">password</span><span class="token punctuation">:</span> yourpass
<span class="token key atrule">bluetoothClassic</span><span class="token punctuation">:</span>
  <span class="token key atrule">addresses</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> &lt;bluetooth<span class="token punctuation">-</span>mac<span class="token punctuation">-</span>of<span class="token punctuation">-</span>device<span class="token punctuation">-</span>to<span class="token punctuation">-</span>track<span class="token punctuation">&gt;</span>
</code></pre></div></li> <li><p>Go to your room-assistant directory by executing <code>cd ~/room-assistant</code>.</p></li> <li><p>Run room-assistant by executing <code>room-assistant</code>. Watch the logs - are all integrations are loaded correctly and is the MQTT connection succesful? The congratulations, you configured room-assistant correctly! 🎉 New entities should now be appearing under the MQTT integration in Home Assistant, which can be viewed in Settings &gt; Integrations.</p></li></ol> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>When starting room-assistant you will see warnings about the Apple Bonjour compatibility layer of Avahi. These won't impact the functionality at all and can just be ignored.</p></div> <h2 id="making-sure-it-always-runs"><a href="#making-sure-it-always-runs" class="header-anchor">#</a> Making sure it always runs</h2> <ol><li><p>If room-assistant is still running from the previous step, stop it by hitting Ctrl + C on your keyboard.</p></li> <li><p>Create a file using <code>sudo nano /etc/systemd/system/room-assistant.service</code> with the following contents:</p> <div class="language- extra-class"><pre class="language-text"><code>[Unit]
Description=room-assistant service

[Service]
ExecStart=/opt/nodejs/bin/room-assistant
WorkingDirectory=/home/pi/room-assistant
Restart=always
RestartSec=10
User=pi

[Install]
WantedBy=multi-user.target
</code></pre></div></li> <li><p>Enable and start your service by executing the commands below.</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> room-assistant.service
<span class="token function">sudo</span> systemctl start room-assistant.service
</code></pre></div></li> <li><p>Congratulations, you are done! 🎊 You may check the status of the service at any time with <code>sudo systemctl status room-assistant</code>. room-assistant will now be started when the Pi Zero W boots.</p></li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/mKeRix/room-assistant/edit/master/docs/guide/quickstart-pi-zero-w.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/26/2020, 5:59:24 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/troubleshooting.html" class="prev">
        Troubleshooting
      </a></span> <span class="next"><a href="/guide/quickstart-pi.html">
        Raspberry Pi 3 or 4
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.59604680.js" defer></script><script src="/assets/js/3.50b3844a.js" defer></script><script src="/assets/js/6.7b1242b0.js" defer></script>
  </body>
</html>
